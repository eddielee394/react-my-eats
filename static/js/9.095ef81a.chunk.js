(this["webpackJsonpreact-myeats"]=this["webpackJsonpreact-myeats"]||[]).push([[9],{284:function(e,t,a){"use strict";var r=a(280),n=a.n(r),i=a(281),c=a(289),s=function e(){Object(i.a)(this,e),this.getGeneralApiError=function(e){switch(e.problem){case"CONNECTION_ERROR":return{error:!0,data:{message:"cannot-connect",temporary:!0}};case"NETWORK_ERROR":return{error:!0,data:{message:"network error",temporary:!0}};case"TIMEOUT_ERROR":return{error:!0,data:{message:"timeout",temporary:!0}};case"SERVER_ERROR":return{error:!0,data:{message:"server",temporary:!0}};case"UNKNOWN_ERROR":return{error:!0,data:{message:"unknown",temporary:!0}};case"CLIENT_ERROR":switch(e.message){case 401:return{data:{message:"unauthorized"}};case 403:return{data:{message:"forbidden"}};case 404:return{data:{message:"not-found",data:e.data}};default:return{data:{message:"rejected",data:e.data}}}case"CANCEL_ERROR":return null;default:return{error:!0,message:"cannot-connect api error",temporary:!0}}}},o=a(33),u={appName:Object({NODE_ENV:"production",PUBLIC_URL:"/react-my-eats",REACT_APP_API_ADAPTER:"mock-adapter",REACT_APP_API_URL:"/api",REACT_APP_BASE_URL:"https://eddielee394.github.io/react-my-eats"}).REACT_APP_NAME||"MyEats",appUrl:"https://eddielee394.github.io/react-my-eats",apiBaseUrl:"/api",apiAdapter:"mock-adapter"},l=function e(){var t=this;Object(i.a)(this,e),this.api=Object(c.create)({baseURL:u.apiBaseUrl,timeout:1e4,headers:{Accept:"application/json"}}),this.baseUrl=u.appUrl,this.getRecipes=function(){var e,a,r,i,c,s;return n.a.async((function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,n.a.awrap(t.api.get("/recipes"));case 2:return e=u.sent,u.next=5,n.a.awrap(t.getIngredientSpecials());case 5:if(a=u.sent,e.ok){u.next=11;break}if(!(r=t.errorHandler.getGeneralApiError(e))){u.next=11;break}return console.log("Api problem",r),u.abrupt("return",r);case 11:return i=function(e){return{uuid:e.uuid,title:e.title,description:e.description,images:{full:"".concat(t.baseUrl).concat(e.images.full),medium:"".concat(t.baseUrl).concat(e.images.medium),small:"".concat(t.baseUrl).concat(e.images.small),gallery:Object(o.d)({title:"test",path:"https://loremflickr.com/320/240/food"},14)},servings:e.servings,prepTime:e.prepTime,cookTime:e.cookTime,postDate:e.postDate,editDate:e.editDate,ingredients:e.ingredients.map((function(e,t){return{uuid:e.uuid,amount:e.amount,measurement:e.measurement,name:e.name,image:"https://loremflickr.com/100/100/food?random=".concat(t)}})),directions:e.directions.map((function(e){return{instructions:e.instructions,optional:e.optional}})),specialsCount:Object(o.a)(a.data,e.ingredients,"ingredientId","uuid").length}},u.prev=12,c=e.data,s=c.map((function(e){return i(e)})),u.abrupt("return",{message:"ok",data:s});case 18:return u.prev=18,u.t0=u.catch(12),u.abrupt("return",{message:"bad-data",data:e.data});case 21:case"end":return u.stop()}}),null,null,[[12,18]])},this.getRecipe=function(e){var a,r,i,c,s;return n.a.async((function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,n.a.awrap(t.api.get("/recipes/".concat(e)));case 2:return a=u.sent,u.next=5,n.a.awrap(t.getIngredientSpecials());case 5:if(r=u.sent,a.ok){u.next=11;break}if(!(i=t.errorHandler.getGeneralApiError(a))){u.next=11;break}return console.log("Api problem",i),u.abrupt("return",i);case 11:return c=function(e){return{uuid:e.uuid,title:e.title,description:e.description,images:{full:"".concat(t.baseUrl).concat(e.images.full),medium:"".concat(t.baseUrl).concat(e.images.medium),small:"".concat(t.baseUrl).concat(e.images.small),gallery:Object(o.d)({title:"test",path:"https://loremflickr.com/320/240/food"},14)},servings:e.servings,prepTime:e.prepTime,cookTime:e.cookTime,postDate:e.postDate,editDate:e.editDate,ingredients:e.ingredients.map((function(e,t){return{uuid:e.uuid,amount:e.amount,measurement:e.measurement,name:e.name,image:"https://loremflickr.com/100/100/food?random=".concat(t)}})),directions:e.directions.map((function(e){return{instructions:e.instructions,optional:e.optional}})),specialsCount:Object(o.a)(r.data,e.ingredients,"ingredientId","uuid").length}},u.prev=12,s=c(a.data),u.abrupt("return",{message:"ok",data:s});case 17:return u.prev=17,u.t0=u.catch(12),u.abrupt("return",{message:"bad-data",data:a.data});case 20:case"end":return u.stop()}}),null,null,[[12,17]])},this.getIngredientSpecials=function(){var e,a,r,i,c;return n.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,n.a.awrap(t.api.get("/specials"));case 2:if((e=s.sent).ok){s.next=8;break}if(!(a=t.errorHandler.getGeneralApiError(e))){s.next=8;break}return console.log("Api problem",a),s.abrupt("return",a);case 8:return r=function(e){return{uuid:e.uuid,ingredientId:e.ingredientId,type:e.type,title:e.title,geo:e.geo,text:Object(o.f)(e.text)}},s.prev=9,i=e.data,c=i.map((function(e){return r(e)})),s.abrupt("return",{message:"ok",data:c});case 15:return s.prev=15,s.t0=s.catch(9),s.abrupt("return",{message:"bad-data",data:e.data});case 18:case"end":return s.stop()}}),null,null,[[9,15]])},this.getIngredientSpecial=function(e){var a,r,i,c;return n.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,n.a.awrap(t.api.get("/specials/".concat(e)));case 2:if((a=s.sent).ok){s.next=8;break}if(!(r=t.errorHandler.getGeneralApiError(a))){s.next=8;break}return console.log("Api problem",r),s.abrupt("return",r);case 8:return i=function(e){return{uuid:e.uuid,ingredientId:e.ingredientId,type:e.type,title:e.title,geo:e.geo,text:Object(o.f)(e.text)}},s.prev=9,c=i(a.data),s.abrupt("return",{message:"ok",data:c});case 14:return s.prev=14,s.t0=s.catch(9),s.abrupt("return",{message:"bad-data",data:a.data});case 17:case"end":return s.stop()}}),null,null,[[9,14]])},this.errorHandler=new s},p=new function e(){var t=this;Object(i.a)(this,e),this.getRecipes=function(){return t.api.getRecipes()},this.getRecipe=function(e){return t.api.getRecipe(e)},this.getIngredientSpecials=function(){var e,a,r,i=arguments;return n.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:return e=i.length>0&&void 0!==i[0]?i[0]:[],c.next=3,n.a.awrap(t.api.getIngredientSpecials());case 3:return a=c.sent,r=a.data.filter((function(t){return e.some((function(e){return t.ingredientId===e.uuid}))})),c.abrupt("return",{data:r});case 6:case"end":return c.stop()}}))},this.getSpecials=function(){return t.api.getIngredientSpecials()},this.getSpecial=function(e){return t.api.getIngredientSpecial(e)},this.api=new l};t.a=p},305:function(e,t,a){"use strict";a.r(t);var r=a(280),n=a.n(r),i=a(282),c=a(0),s=a.n(c),o=a(284),u=a(48),l=a(242),p=a(388),d=a(389),m=a(399),g=a(379),f=a(273),b=a(390),E=a(391),h=a(396),v=a(274),k=a(392),R=a(272),y=a(397),O=a(294),x=a.n(O),A=a(302),w=a.n(A),I=a(303),C=a.n(I),T=a(304),j=a.n(T),_=a(58),N=a(33),S=Object(l.a)((function(e){return{favoriteButton:{},specialsIcon:{color:e.palette.background.paper,backgroundColor:e.palette.text.secondary,border:"2px solid ".concat(e.palette.background.paper)},recipeTimeIcon:{color:e.palette.secondary.contrastText,marginLeft:"auto"}}}));var U=function(e){var t=Object(c.useState)(!1),a=Object(i.a)(t,2),r=a[0],n=a[1],o=e.recipe,l=S(),O=o.prepTime+o.cookTime,A=o.specialsCount>0;return s.a.createElement("div",{className:"w-full my-5","data-testid":o.uuid},s.a.createElement(p.a,{className:"py-5"},s.a.createElement(d.a,{avatar:s.a.createElement(m.a,null,"ME"),title:s.a.createElement(g.a,{variant:"h6"},"recipe.author"),subheader:s.a.createElement(g.a,{variant:"subtitle1"},Object(N.c)(o.postDate)),action:s.a.createElement(f.a,{onClick:function(){n(!r)}},r?s.a.createElement(w.a,{color:"error"}):s.a.createElement(C.a,null))}),s.a.createElement(b.a,{className:"flex h-320"},s.a.createElement(_.a,{src:o.images.medium,alt:o.title})),s.a.createElement(u.a,{to:"/recipes/".concat(o.uuid),"data-testid":"recipeListItemLink-".concat(o.uuid)},s.a.createElement(E.a,null,s.a.createElement("div",{className:"flex justify-between"},s.a.createElement(g.a,{variant:"h4"},o.title),A&&s.a.createElement(h.a,{title:s.a.createElement(g.a,{variant:"caption"},o.specialsCount," Special Promotions Available!"),arrow:!0},s.a.createElement(v.a,{badgeContent:o.specialsCount,overlap:"circle",classes:{badge:l.specialsIcon}},s.a.createElement(j.a,{fontSize:"large",color:"primary"})))),s.a.createElement(g.a,{variant:"body1",component:"p",gutterBottom:!0},o.description))),s.a.createElement(k.a,{disableSpacing:!0},s.a.createElement(R.a,{onClick:N.g,size:"small"},o.specialsCount," Likes"),s.a.createElement(R.a,{onClick:N.g,size:"small"},o.specialsCount," Comments"),s.a.createElement(y.a,{icon:s.a.createElement(x.a,null),label:"".concat(O," mins"),color:"primary",className:l.recipeTimeIcon}))))},P=a(68),L=a(38);function D(e){return e.recipes.map((function(e){return s.a.createElement(U,{key:e.uuid,recipe:e})}))}t.default=function(){var e=Object(c.useState)([]),t=Object(i.a)(e,2),a=t[0],r=t[1],u=Object(c.useState)(!1),l=Object(i.a)(u,2),p=l[0],d=l[1];return Object(c.useEffect)((function(){!function(){var e;n.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return d(!0),t.next=3,n.a.awrap(o.a.getRecipes());case 3:(e=t.sent).error?(d(!0),L.a.error(e.data.message,{autoClose:!1}),console.log("error response",e)):(r(e.data),d(!1));case 5:case"end":return t.stop()}}))}()}),[]),s.a.createElement(P.a,{loader:!0,loadingProps:{isLoading:p,loaderType:"placeholder",type:"blogList"}},s.a.createElement(D,{recipes:a}))}}}]);