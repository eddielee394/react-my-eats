(this["webpackJsonpreact-myeats"]=this["webpackJsonpreact-myeats"]||[]).push([[8],{284:function(e,t,a){"use strict";var r=a(280),n=a.n(r),i=a(281),c=a(289),l=function e(){Object(i.a)(this,e),this.getGeneralApiError=function(e){switch(e.problem){case"CONNECTION_ERROR":return{error:!0,data:{message:"cannot-connect",temporary:!0}};case"NETWORK_ERROR":return{error:!0,data:{message:"network error",temporary:!0}};case"TIMEOUT_ERROR":return{error:!0,data:{message:"timeout",temporary:!0}};case"SERVER_ERROR":return{error:!0,data:{message:"server",temporary:!0}};case"UNKNOWN_ERROR":return{error:!0,data:{message:"unknown",temporary:!0}};case"CLIENT_ERROR":switch(e.message){case 401:return{data:{message:"unauthorized"}};case 403:return{data:{message:"forbidden"}};case 404:return{data:{message:"not-found",data:e.data}};default:return{data:{message:"rejected",data:e.data}}}case"CANCEL_ERROR":return null;default:return{error:!0,message:"cannot-connect api error",temporary:!0}}}},s=a(33),o={appName:Object({NODE_ENV:"production",PUBLIC_URL:"/react-my-eats",REACT_APP_API_ADAPTER:"mock-adapter",REACT_APP_API_URL:"/api",REACT_APP_BASE_URL:"https://eddielee394.github.io/react-my-eats"}).REACT_APP_NAME||"MyEats",appUrl:"https://eddielee394.github.io/react-my-eats",apiBaseUrl:"/api",apiAdapter:"mock-adapter"},u=function e(){var t=this;Object(i.a)(this,e),this.api=Object(c.create)({baseURL:o.apiBaseUrl,timeout:1e4,headers:{Accept:"application/json"}}),this.baseUrl=o.appUrl,this.getRecipes=function(){var e,a,r,i,c,l;return n.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,n.a.awrap(t.api.get("/recipes"));case 2:return e=o.sent,o.next=5,n.a.awrap(t.getIngredientSpecials());case 5:if(a=o.sent,e.ok){o.next=11;break}if(!(r=t.errorHandler.getGeneralApiError(e))){o.next=11;break}return console.log("Api problem",r),o.abrupt("return",r);case 11:return i=function(e){return{uuid:e.uuid,title:e.title,description:e.description,images:{full:"".concat(t.baseUrl).concat(e.images.full),medium:"".concat(t.baseUrl).concat(e.images.medium),small:"".concat(t.baseUrl).concat(e.images.small),gallery:Object(s.d)({title:"test",path:"https://loremflickr.com/320/240/food"},14)},servings:e.servings,prepTime:e.prepTime,cookTime:e.cookTime,postDate:e.postDate,editDate:e.editDate,ingredients:e.ingredients.map((function(e,t){return{uuid:e.uuid,amount:e.amount,measurement:e.measurement,name:e.name,image:"https://loremflickr.com/100/100/food?random=".concat(t)}})),directions:e.directions.map((function(e){return{instructions:e.instructions,optional:e.optional}})),specialsCount:Object(s.a)(a.data,e.ingredients,"ingredientId","uuid").length}},o.prev=12,c=e.data,l=c.map((function(e){return i(e)})),o.abrupt("return",{message:"ok",data:l});case 18:return o.prev=18,o.t0=o.catch(12),o.abrupt("return",{message:"bad-data",data:e.data});case 21:case"end":return o.stop()}}),null,null,[[12,18]])},this.getRecipe=function(e){var a,r,i,c,l;return n.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,n.a.awrap(t.api.get("/recipes/".concat(e)));case 2:return a=o.sent,o.next=5,n.a.awrap(t.getIngredientSpecials());case 5:if(r=o.sent,a.ok){o.next=11;break}if(!(i=t.errorHandler.getGeneralApiError(a))){o.next=11;break}return console.log("Api problem",i),o.abrupt("return",i);case 11:return c=function(e){return{uuid:e.uuid,title:e.title,description:e.description,images:{full:"".concat(t.baseUrl).concat(e.images.full),medium:"".concat(t.baseUrl).concat(e.images.medium),small:"".concat(t.baseUrl).concat(e.images.small),gallery:Object(s.d)({title:"test",path:"https://loremflickr.com/320/240/food"},14)},servings:e.servings,prepTime:e.prepTime,cookTime:e.cookTime,postDate:e.postDate,editDate:e.editDate,ingredients:e.ingredients.map((function(e,t){return{uuid:e.uuid,amount:e.amount,measurement:e.measurement,name:e.name,image:"https://loremflickr.com/100/100/food?random=".concat(t)}})),directions:e.directions.map((function(e){return{instructions:e.instructions,optional:e.optional}})),specialsCount:Object(s.a)(r.data,e.ingredients,"ingredientId","uuid").length}},o.prev=12,l=c(a.data),o.abrupt("return",{message:"ok",data:l});case 17:return o.prev=17,o.t0=o.catch(12),o.abrupt("return",{message:"bad-data",data:a.data});case 20:case"end":return o.stop()}}),null,null,[[12,17]])},this.getIngredientSpecials=function(){var e,a,r,i,c;return n.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,n.a.awrap(t.api.get("/specials"));case 2:if((e=l.sent).ok){l.next=8;break}if(!(a=t.errorHandler.getGeneralApiError(e))){l.next=8;break}return console.log("Api problem",a),l.abrupt("return",a);case 8:return r=function(e){return{uuid:e.uuid,ingredientId:e.ingredientId,type:e.type,title:e.title,geo:e.geo,text:Object(s.f)(e.text)}},l.prev=9,i=e.data,c=i.map((function(e){return r(e)})),l.abrupt("return",{message:"ok",data:c});case 15:return l.prev=15,l.t0=l.catch(9),l.abrupt("return",{message:"bad-data",data:e.data});case 18:case"end":return l.stop()}}),null,null,[[9,15]])},this.getIngredientSpecial=function(e){var a,r,i,c;return n.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,n.a.awrap(t.api.get("/specials/".concat(e)));case 2:if((a=l.sent).ok){l.next=8;break}if(!(r=t.errorHandler.getGeneralApiError(a))){l.next=8;break}return console.log("Api problem",r),l.abrupt("return",r);case 8:return i=function(e){return{uuid:e.uuid,ingredientId:e.ingredientId,type:e.type,title:e.title,geo:e.geo,text:Object(s.f)(e.text)}},l.prev=9,c=i(a.data),l.abrupt("return",{message:"ok",data:c});case 14:return l.prev=14,l.t0=l.catch(9),l.abrupt("return",{message:"bad-data",data:a.data});case 17:case"end":return l.stop()}}),null,null,[[9,14]])},this.errorHandler=new l},m=new function e(){var t=this;Object(i.a)(this,e),this.getRecipes=function(){return t.api.getRecipes()},this.getRecipe=function(e){return t.api.getRecipe(e)},this.getIngredientSpecials=function(){var e,a,r,i=arguments;return n.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:return e=i.length>0&&void 0!==i[0]?i[0]:[],c.next=3,n.a.awrap(t.api.getIngredientSpecials());case 3:return a=c.sent,r=a.data.filter((function(t){return e.some((function(e){return t.ingredientId===e.uuid}))})),c.abrupt("return",{data:r});case 6:case"end":return c.stop()}}))},this.getSpecials=function(){return t.api.getIngredientSpecials()},this.getSpecial=function(e){return t.api.getIngredientSpecial(e)},this.api=new u};t.a=m},297:function(e,t,a){"use strict";var r=a(34),n=a(0),i=a.n(n),c=a(4),l=a(301),s=a(242),o=a(277),u=a(249),m=Object(s.a)((function(e){return{col:{padding:e.spacing(1.25),marginTop:e.spacing(1.25),marginBottom:e.spacing(1.25)},widget:{marginTop:e.spacing(2),marginBottom:e.spacing(2),padding:e.spacing(1),overflow:"hidden"}}}));t.a=function(e){var t=e.children,a=e.widgetClasses,n=void 0===a?"":a,s=e.colSize,d=void 0===s?"1/5":s,p=e.className,g=void 0===p?"":p,f=(Object(r.a)(e,["children","widgetClasses","colSize","className"]),m());return i.a.createElement("div",{className:Object(c.a)(f.col,g,"flex flex-col w-full sm:w-".concat(d," sidebar-container"))},i.a.createElement(l.a,{offsetTop:10,offsetBottom:20},i.a.createElement("div",{className:"widget-container"},i.a.Children.map(t,(function(e){return e.type.name===o.a.name?i.a.createElement(o.a,e.props,i.a.createElement(u.a,{className:Object(c.a)(f.widget,n)},e)):i.a.createElement(u.a,{className:Object(c.a)(f.widget,n)},e)})))))}},395:function(e,t,a){"use strict";a.r(t);var r=a(280),n=a.n(r),i=a(282),c=a(0),l=a.n(c),s=a(4),o=a(249),u=a(382),m=a(284),d=a(242),p=a(379),g=a(397),f=a(272),b=a(33),E=a(294),v=a.n(E),h=Object(d.a)((function(e){return{recipeTime:{color:e.palette.grey[900]}}})),x=function(e){var t=e.title,a=e.prepTime,r=e.cookTime,n=h();return l.a.createElement("div",{className:"w-full md:flex justify-between my-8"},l.a.createElement("div",{className:"flex flex-col items-center md:items-stretch w-full md:w-2/3"},l.a.createElement(p.a,{variant:"h4",className:"recipe-title"},t),l.a.createElement("div",{className:"flex my-5"},l.a.createElement(g.a,{icon:l.a.createElement(v.a,{color:"primary"}),label:"Prep time: ".concat(a," mins"),size:"small",variant:"outlined",className:Object(s.a)(n.recipeTime,"ml-2")}),l.a.createElement(g.a,{icon:l.a.createElement(v.a,{color:"primary"}),label:"Cook time: ".concat(r," mins"),size:"small",variant:"outlined",className:Object(s.a)(n.recipeTime,"ml-2")}))),l.a.createElement("div",{className:"flex flex-col w-full md:w-1/3 self-center"},l.a.createElement("div",{className:"flex flex-row justify-center"},l.a.createElement(f.a,{onClick:b.g,size:"medium",variant:"contained",color:"primary"},"Start Cooking"))))};x.defaultProps={title:"",images:{}};var y=x,O=a(47),w=a(25),j=a(380),N=a(381),k=a(274),R=a(399),S=a(245),C=a(248),I=a(383),T=a(358),A=a.n(T),_=a(356),L=a.n(_),U=a(355),P=a.n(U),z=a(354),B=a.n(z),D=a(357),H=a.n(D),M=a(58),G=Object(d.a)((function(e){return{specialsIconBadge:{width:23,height:23,right:-3,padding:"12px",top:35,backgroundColor:e.palette.background.paper,border:"1px solid ".concat(e.palette.background.paper)},ingredientListSpecial:{boxShadow:"0px -5px 5px -5px rgba(137,246,207,0.50)",borderTopLeftRadius:15,borderTopRightRadius:5,borderTop:"1px solid ".concat(e.palette.background.paper),borderLeft:"4px solid ".concat(e.palette.primary.light),borderRight:"2px solid ".concat(e.palette.primary.light)},ingredientListSpecialContainer:{boxShadow:"inset 0px -5px 7px -5px rgba(137,246,207,0.50)",borderBottomLeftRadius:15,borderBottomRightRadius:5,borderLeft:"4px solid ".concat(e.palette.primary.light),borderRight:"2px solid ".concat(e.palette.primary.light)}}})),V=function(e){var t=e.type,a=e.color,r=e.fontSize;return{event:l.a.createElement(B.a,{color:a,fontSize:r}),local:l.a.createElement(P.a,{color:a,fontSize:r}),promocode:l.a.createElement(L.a,{color:a,fontSize:r}),sale:l.a.createElement(H.a,{color:a,fontSize:r})}[t]};var W=function(e){var t=e.ingredients,a=e.specials,r=Object(c.useState)(!1),n=Object(i.a)(r,2),o=n[0],m=n[1],d=G(),g=function(e){return Object(w.some)(a,["ingredientId",e])},E=function(e){var t,r=(t=e.uuid,a.find((function(e){return e.ingredientId===t})));return l.a.createElement(l.a.Fragment,null,l.a.createElement(j.a,{className:Object(s.a)(Object(O.a)({},d.ingredientListSpecial,g(e.uuid))),button:g(e.uuid),onClick:function(){return g(e.uuid)&&function(e){m(o!==e&&e)}(e.uuid)}},l.a.createElement(N.a,null,l.a.createElement(k.a,{badgeContent:l.a.createElement(A.a,{color:"primary"}),overlap:"circle",classes:{badge:d.specialsIconBadge},invisible:!g(e.uuid)},l.a.createElement(R.a,null,l.a.createElement(M.a,{src:e.image})))),l.a.createElement(p.a,{variant:"subtitle2"},e.name),g(e.uuid)&&l.a.createElement("div",{className:"flex flex-col items-center ml-auto"},l.a.createElement(V,{type:r.type,color:"primary",fontSize:"small"}),l.a.createElement(p.a,{variant:"caption"},Object(w.capitalize)(r.type)," Special"))),g(e.uuid)&&l.a.createElement(S.a,{in:o===e.uuid,timeout:"auto",unmountOnExit:!0},l.a.createElement("div",{className:Object(s.a)(d.ingredientListSpecialContainer,"flex p-5 w-full")},l.a.createElement("div",{className:"flex flex-col w-3/5"},l.a.createElement(p.a,{className:"my-2",variant:"body1"},r.title),l.a.createElement(u.a,{className:"w-1/2"}),l.a.createElement(p.a,{className:"my-2",variant:"body2"},r.text)),l.a.createElement("div",{className:"flex flex-col w-2/5 justify-center items-center"},l.a.createElement(C.a,{in:o===e.uuid,timeout:300,style:{transitionDelay:"".concat(o===e.uuid?500:0,"ms")},unmountOnExit:!0},l.a.createElement(f.a,{variant:"outlined",color:"primary",onClick:b.g},"Learn More!"))))))};return l.a.createElement("div",{className:"w-full my-8 mb-10"},l.a.createElement(p.a,{variant:"h6"},"Ingredients"),l.a.createElement(I.a,{className:"flex flex-wrap"},t.map((function(e){return l.a.createElement("div",{className:"w-full md:w-1/2",key:e.uuid},E(e))}))))},F=a(398),J=a(384),K=a(394);function q(e){var t=e.directions,a=Object(c.useState)(0),r=Object(i.a)(a,2),n=r[0],s=r[1];return l.a.createElement("div",{className:"w-full my-8 mb-10"},l.a.createElement(p.a,{variant:"h6"},"How to cook"),l.a.createElement("div",{className:"w-full"},l.a.createElement(F.a,{activeStep:n,orientation:"vertical",connector:null,className:"flex flex-wrap content-between md:max-h-360 p-5",nonLinear:!0},l.a.Children.toArray(t.map((function(e,t){return l.a.createElement(J.a,{className:"w-full md:w-1/2 my-5 px-3"},l.a.createElement(K.a,{onClick:function(){return function(e){s(e)}(t)}},l.a.createElement(p.a,{variant:"body2",align:"left"},e.instructions)))}))))))}q.defaultProps={directions:[]};var Q=q,X=a(68),Y=a(297),Z=a(6),$=a(385),ee=a(386),te=a(387),ae=a(273),re=a(360),ne=a.n(re),ie=a(361),ce=a.n(ie),le=Object(d.a)((function(e){return{imagesContainer:{},featuredImageContainer:{overflow:"hidden"},gridImageContainer:{},gridImageViewMoreBadge:{color:e.palette.background.paper,border:"2px solid ".concat(e.palette.overlay.light[3])}}})),se=Object(Z.a)((function(e){return{root:{height:"100%",backgroundColor:e.palette.overlay.light[3]},titleWrap:{color:e.palette.text.primary,margin:0}}}))($.a);var oe=function(e){var t=e.images,a=void 0===t?{}:t,r=Object(c.useState)([]),n=Object(i.a)(r,2),o=n[0],u=n[1],m=Object(c.useState)(1),d=Object(i.a)(m,2),p=d[0],g=d[1],f=Object(c.useState)(1),b=Object(i.a)(f,2),E=b[0],v=b[1],h=Object(c.useState)(5),x=Object(i.a)(h,1)[0],y=a.gallery,O=le(),j=Object(c.useMemo)((function(){return Object(w.chunk)(y,x)}),[y,x]),N=p===E?0:y.length-o.length*p;Object(c.useEffect)((function(){u(j[p-1]),v(j.length)}),[p,j]);var R=l.a.createElement(ee.a,{cellHeight:80,cols:3},o.map((function(e){return l.a.createElement(te.a,{key:e.id},l.a.createElement(M.a,{src:e.path}))})),l.a.createElement(te.a,{key:a.small},l.a.createElement(M.a,{src:a.small}),l.a.createElement(se,{className:"text-center",title:l.a.createElement(ae.a,{onClick:function(){g(p+1>E?1:p+1)}},l.a.createElement(k.a,{badgeContent:N,color:"primary",classes:{badge:O.gridImageViewMoreBadge}},N>0?l.a.createElement(ne.a,{fontSize:"large"}):l.a.createElement(ce.a,{fontSize:"large"})))})));return l.a.createElement("div",{className:Object(s.a)(O.imagesContainer,"images-container w-full")},l.a.createElement("div",{className:Object(s.a)(O.featuredImageContainer,"w-full rounded")},l.a.createElement(M.a,{src:a.medium})),l.a.createElement("div",{className:Object(s.a)(O.gridImageContainer,"w-full mt-4")},R))};t.default=function(e){var t=Object(c.useState)(!0),a=Object(i.a)(t,2),r=a[0],d=a[1],p=Object(c.useState)({}),g=Object(i.a)(p,2),f=g[0],b=g[1],E=Object(c.useState)([]),v=Object(i.a)(E,2),h=v[0],x=v[1],O=e.match.params.id;return Object(c.useEffect)((function(){!function(){var e,t;n.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,n.a.awrap(m.a.getRecipe(O));case 2:return e=a.sent,b(e.data),a.next=6,n.a.awrap(m.a.getIngredientSpecials(e.data.ingredients));case 6:t=a.sent,x(t.data),d(!1);case 9:case"end":return a.stop()}}))}()}),[O]),l.a.createElement("div",{className:"sm:flex w-full lg:px-208 my-4","data-testid":"recipe-detail-".concat(f.uuid)},l.a.createElement(Y.a,{colSize:"1/3",widgetClasses:"justify-center"},l.a.createElement(X.a,{loader:!0,loadingProps:{isLoading:r,loaderType:"placeholder",type:"gridFeatured"}},l.a.createElement(oe,{images:f.images}))),l.a.createElement("div",{className:Object(s.a)("w-full my-5 p-5 recipe-detail-container",r&&"flex")},l.a.createElement(X.a,{loader:!0,loadingProps:{isLoading:r}},l.a.createElement(o.a,{className:Object(s.a)("flex flex-col items-center my-5 p-5")},l.a.createElement(y,f),l.a.createElement(u.a,{variant:"middle",className:"w-full"}),l.a.createElement(W,{ingredients:f.ingredients,specials:h})),l.a.createElement(o.a,{className:Object(s.a)("flex flex-col items-center my-5 p-5")},l.a.createElement(Q,{directions:f.directions})))))}}}]);
//# sourceMappingURL=8.95f8f681.chunk.js.map